<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Chapter 8: Collections
  
  #
  

Collections are fundamental to any programming language. Io provides three main collection types: List (ordered, indexed), Map (key-value pairs), and Sequence (strings). This chapter explores these collections, their methods, and how to create custom collection types.

  Lists: Ordered Collections
  
  #
  

Lists in Io are dynamic arrays that can hold any type of object:
// Creating lists
empty := list()
numbers := list(1, 2, 3, 4, 5)
mixed := list(&quot;hello&quot;, 42, true, Object clone)

// Lists are objects
numbers type println  // List

// Basic operations
numbers size println      // 5
numbers isEmpty println   // false
numbers first println     // 1
numbers last println      // 5
numbers at(2) println     // 3 (zero-indexed)


  List Manipulation
  
  #
  

fruits := list(&quot;apple&quot;, &quot;banana&quot;)

// Adding elements
fruits append(&quot;orange&quot;)
fruits prepend(&quot;grape&quot;)
fruits println  // list(grape, apple, banana, orange)

// Insert at position
fruits atInsert(2, &quot;mango&quot;)
fruits println  // list(grape, apple, mango, banana, orange)

// Removing elements
fruits remove(&quot;mango&quot;)
fruits removeAt(0)
fruits pop  // Removes and returns last element
fruits println  // list(apple, banana)

// Multiple operations
fruits appendSeq(list(&quot;kiwi&quot;, &quot;peach&quot;))
fruits println  // list(apple, banana, kiwi, peach)


  List Iteration
  
  #
  

numbers := list(1, 2, 3, 4, 5)

// Basic iteration
numbers foreach(n,
    n println
)

// With index
numbers foreach(i, n,
    (i .. &quot;: &quot; .. n) println
)

// Reverse iteration
numbers reverseForEach(n,
    n println
)


  Functional Operations
  
  #
  

numbers := list(1, 2, 3, 4, 5)

// Map: transform each element
squared := numbers map(x, x * x)
squared println  // list(1, 4, 9, 16, 25)

// Select: filter elements
evens := numbers select(x, x % 2 == 0)
evens println  // list(2, 4)

// Reject: inverse of select
odds := numbers reject(x, x % 2 == 0)
odds println  // list(1, 3, 5)

// Detect: find first match
firstEven := numbers detect(x, x % 2 == 0)
firstEven println  // 2

// Reduce: aggregate
sum := numbers reduce(&#43;)
sum println  // 15

// Custom reduce
product := numbers reduce(a, b, a * b)
product println  // 120

// Any/all predicates
numbers contains(3) println  // true
numbers containsAll(list(2, 4)) println  // true
numbers containsAny(list(10, 3)) println  // true


  List Slicing and Manipulation
  
  #
  

letters := list(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;)

// Slicing
letters slice(1, 3) println  // list(b, c, d)
letters slice(2) println     // list(c, d, e)

// Copying
copy := letters copy
copy atPut(0, &quot;z&quot;)
letters println  // list(a, b, c, d, e) - unchanged
copy println     // list(z, b, c, d, e)

// Sorting
numbers := list(3, 1, 4, 1, 5, 9)
numbers sort println  // list(1, 1, 3, 4, 5, 9)

// Custom sort
people := list(
    Object clone do(name := &quot;Alice&quot;; age := 30),
    Object clone do(name := &quot;Bob&quot;; age := 25),
    Object clone do(name := &quot;Charlie&quot;; age := 35)
)

people sortBy(block(p, p age)) foreach(p,
    (p name .. &quot;: &quot; .. p age) println
)
// Bob: 25
// Alice: 30
// Charlie: 35


  Maps: Key-Value Stores
  
  #
  

Maps (also called dictionaries or hash tables) store key-value pairs:">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/08-collections/">
  <meta property="og:site_name" content="The Io Programming Language">
  <meta property="og:title" content="Collections">
  <meta property="og:description" content="Chapter 8: Collections # Collections are fundamental to any programming language. Io provides three main collection types: List (ordered, indexed), Map (key-value pairs), and Sequence (strings). This chapter explores these collections, their methods, and how to create custom collection types.
Lists: Ordered Collections # Lists in Io are dynamic arrays that can hold any type of object:
// Creating lists empty := list() numbers := list(1, 2, 3, 4, 5) mixed := list(&#34;hello&#34;, 42, true, Object clone) // Lists are objects numbers type println // List // Basic operations numbers size println // 5 numbers isEmpty println // false numbers first println // 1 numbers last println // 5 numbers at(2) println // 3 (zero-indexed) List Manipulation # fruits := list(&#34;apple&#34;, &#34;banana&#34;) // Adding elements fruits append(&#34;orange&#34;) fruits prepend(&#34;grape&#34;) fruits println // list(grape, apple, banana, orange) // Insert at position fruits atInsert(2, &#34;mango&#34;) fruits println // list(grape, apple, mango, banana, orange) // Removing elements fruits remove(&#34;mango&#34;) fruits removeAt(0) fruits pop // Removes and returns last element fruits println // list(apple, banana) // Multiple operations fruits appendSeq(list(&#34;kiwi&#34;, &#34;peach&#34;)) fruits println // list(apple, banana, kiwi, peach) List Iteration # numbers := list(1, 2, 3, 4, 5) // Basic iteration numbers foreach(n, n println ) // With index numbers foreach(i, n, (i .. &#34;: &#34; .. n) println ) // Reverse iteration numbers reverseForEach(n, n println ) Functional Operations # numbers := list(1, 2, 3, 4, 5) // Map: transform each element squared := numbers map(x, x * x) squared println // list(1, 4, 9, 16, 25) // Select: filter elements evens := numbers select(x, x % 2 == 0) evens println // list(2, 4) // Reject: inverse of select odds := numbers reject(x, x % 2 == 0) odds println // list(1, 3, 5) // Detect: find first match firstEven := numbers detect(x, x % 2 == 0) firstEven println // 2 // Reduce: aggregate sum := numbers reduce(&#43;) sum println // 15 // Custom reduce product := numbers reduce(a, b, a * b) product println // 120 // Any/all predicates numbers contains(3) println // true numbers containsAll(list(2, 4)) println // true numbers containsAny(list(10, 3)) println // true List Slicing and Manipulation # letters := list(&#34;a&#34;, &#34;b&#34;, &#34;c&#34;, &#34;d&#34;, &#34;e&#34;) // Slicing letters slice(1, 3) println // list(b, c, d) letters slice(2) println // list(c, d, e) // Copying copy := letters copy copy atPut(0, &#34;z&#34;) letters println // list(a, b, c, d, e) - unchanged copy println // list(z, b, c, d, e) // Sorting numbers := list(3, 1, 4, 1, 5, 9) numbers sort println // list(1, 1, 3, 4, 5, 9) // Custom sort people := list( Object clone do(name := &#34;Alice&#34;; age := 30), Object clone do(name := &#34;Bob&#34;; age := 25), Object clone do(name := &#34;Charlie&#34;; age := 35) ) people sortBy(block(p, p age)) foreach(p, (p name .. &#34;: &#34; .. p age) println ) // Bob: 25 // Alice: 30 // Charlie: 35 Maps: Key-Value Stores # Maps (also called dictionaries or hash tables) store key-value pairs:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>Collections | The Io Programming Language</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/08-collections/">
<link rel="stylesheet" href="/book.min.4cb515616f615b2a0bff9bc1586e8704536e3d9ada38b7ed57973b3f954b35de.css" integrity="sha256-TLUVYW9hWyoL/5vBWG6HBFNuPZraOLftV5c7P5VLNd4=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.6127d649f2e0bf8a827d7be8952f94a47fbc47a345e1a59a4efed4351e016764.js" integrity="sha256-YSfWSfLgv4qCfXvolS&#43;UpH&#43;8R6NF4aWaTv7UNR4BZ2Q=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <link rel="stylesheet" href="/custom.css">
</head>
<body dir="ltr" class="book-kind-page book-type-docs book-layout-">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  
  
  <header class="top-header">
    <div class="header-container">
      <div class="header-brand">
        <a href="/" class="header-title">The Io Programming Language</a>
      </div>
      <div class="header-search">
        
<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>


      </div>
    </div>
  </header>
  
  <main class="container flex with-header">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>













  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/00-preface/" class="">Why Io?</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/01-introduction/" class="">Introduction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/02-getting-started/" class="">Getting Started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/03-everything-is-an-object/" class="">Everything is an Object</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/04-prototypes-not-classes/" class="">Prototypes, Not Classes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/05-messages-and-slots/" class="">Messages and Slots</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/06-cloning-and-inheritance/" class="">Cloning and Inheritance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/07-control-flow/" class="">Control Flow</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/08-collections/" class="active">Collections</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/09-blocks-and-closures/" class="">Blocks and Closures</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/10-exceptions/" class="">Exceptions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/11-metaprogramming/" class="">Metaprogramming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/12-concurrency/" class="">Concurrency</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/13-domain-specific-languages/" class="">Domain-Specific Languages</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/14-c-integration/" class="">C Integration</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/15-real-world-patterns/" class="">Real-World Patterns</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/16-case-studies/" class="">Case Studies</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/17-ecosystem-and-libraries/" class="">Ecosystem and Libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/18-conclusion/" class="">Conclusion</a>
  

        </li>
      
    
  </ul>










  
<ul>
  
  <li>
    
    <a href="https://github.com/IoLanguage/io"  target="_blank" rel="noopener">
        GitHub
      </a>
  </li>
  
  <li>
    
    <a href="https://iolanguage.org"  target="_blank" rel="noopener">
        Io Language
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Collections</h3>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
<article class="markdown book-article">
  
  
  
  
  
  
  
    
  
  
  <div class="chapter-header">
    <h1 class="chapter-title">Collections</h1>
    
    <div class="chapter-number">Chapter 8</div>
    
  </div>
  
  
  
  
  
<p>Collections are fundamental to any programming language. Io provides three main collection types: List (ordered, indexed), Map (key-value pairs), and Sequence (strings). This chapter explores these collections, their methods, and how to create custom collection types.</p>
<h2 id="lists-ordered-collections">
  Lists: Ordered Collections
  
  <a class="anchor" href="#lists-ordered-collections">#</a>
  
</h2>
<p>Lists in Io are dynamic arrays that can hold any type of object:</p>
<pre><code class="language-io">// Creating lists
empty := list()
numbers := list(1, 2, 3, 4, 5)
mixed := list(&quot;hello&quot;, 42, true, Object clone)

// Lists are objects
numbers type println  // List

// Basic operations
numbers size println      // 5
numbers isEmpty println   // false
numbers first println     // 1
numbers last println      // 5
numbers at(2) println     // 3 (zero-indexed)
</code></pre>
<h3 id="list-manipulation">
  List Manipulation
  
  <a class="anchor" href="#list-manipulation">#</a>
  
</h3>
<pre><code class="language-io">fruits := list(&quot;apple&quot;, &quot;banana&quot;)

// Adding elements
fruits append(&quot;orange&quot;)
fruits prepend(&quot;grape&quot;)
fruits println  // list(grape, apple, banana, orange)

// Insert at position
fruits atInsert(2, &quot;mango&quot;)
fruits println  // list(grape, apple, mango, banana, orange)

// Removing elements
fruits remove(&quot;mango&quot;)
fruits removeAt(0)
fruits pop  // Removes and returns last element
fruits println  // list(apple, banana)

// Multiple operations
fruits appendSeq(list(&quot;kiwi&quot;, &quot;peach&quot;))
fruits println  // list(apple, banana, kiwi, peach)
</code></pre>
<h3 id="list-iteration">
  List Iteration
  
  <a class="anchor" href="#list-iteration">#</a>
  
</h3>
<pre><code class="language-io">numbers := list(1, 2, 3, 4, 5)

// Basic iteration
numbers foreach(n,
    n println
)

// With index
numbers foreach(i, n,
    (i .. &quot;: &quot; .. n) println
)

// Reverse iteration
numbers reverseForEach(n,
    n println
)
</code></pre>
<h3 id="functional-operations">
  Functional Operations
  
  <a class="anchor" href="#functional-operations">#</a>
  
</h3>
<pre><code class="language-io">numbers := list(1, 2, 3, 4, 5)

// Map: transform each element
squared := numbers map(x, x * x)
squared println  // list(1, 4, 9, 16, 25)

// Select: filter elements
evens := numbers select(x, x % 2 == 0)
evens println  // list(2, 4)

// Reject: inverse of select
odds := numbers reject(x, x % 2 == 0)
odds println  // list(1, 3, 5)

// Detect: find first match
firstEven := numbers detect(x, x % 2 == 0)
firstEven println  // 2

// Reduce: aggregate
sum := numbers reduce(+)
sum println  // 15

// Custom reduce
product := numbers reduce(a, b, a * b)
product println  // 120

// Any/all predicates
numbers contains(3) println  // true
numbers containsAll(list(2, 4)) println  // true
numbers containsAny(list(10, 3)) println  // true
</code></pre>
<h3 id="list-slicing-and-manipulation">
  List Slicing and Manipulation
  
  <a class="anchor" href="#list-slicing-and-manipulation">#</a>
  
</h3>
<pre><code class="language-io">letters := list(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;)

// Slicing
letters slice(1, 3) println  // list(b, c, d)
letters slice(2) println     // list(c, d, e)

// Copying
copy := letters copy
copy atPut(0, &quot;z&quot;)
letters println  // list(a, b, c, d, e) - unchanged
copy println     // list(z, b, c, d, e)

// Sorting
numbers := list(3, 1, 4, 1, 5, 9)
numbers sort println  // list(1, 1, 3, 4, 5, 9)

// Custom sort
people := list(
    Object clone do(name := &quot;Alice&quot;; age := 30),
    Object clone do(name := &quot;Bob&quot;; age := 25),
    Object clone do(name := &quot;Charlie&quot;; age := 35)
)

people sortBy(block(p, p age)) foreach(p,
    (p name .. &quot;: &quot; .. p age) println
)
// Bob: 25
// Alice: 30
// Charlie: 35
</code></pre>
<h2 id="maps-key-value-stores">
  Maps: Key-Value Stores
  
  <a class="anchor" href="#maps-key-value-stores">#</a>
  
</h2>
<p>Maps (also called dictionaries or hash tables) store key-value pairs:</p>
<pre><code class="language-io">// Creating maps
empty := Map clone
person := Map clone atPut(&quot;name&quot;, &quot;Alice&quot;) atPut(&quot;age&quot;, 30)

// Alternative creation
person := Map with(
    &quot;name&quot;, &quot;Alice&quot;,
    &quot;age&quot;, 30,
    &quot;city&quot;, &quot;New York&quot;
)

// Accessing values
person at(&quot;name&quot;) println     // Alice
person at(&quot;missing&quot;) println  // nil
person at(&quot;missing&quot;, &quot;default&quot;) println  // default

// Setting values
person atPut(&quot;age&quot;, 31)
person atPut(&quot;email&quot;, &quot;alice@example.com&quot;)

// Checking keys
person hasKey(&quot;name&quot;) println  // true
person hasKey(&quot;phone&quot;) println  // false
</code></pre>
<h3 id="map-operations">
  Map Operations
  
  <a class="anchor" href="#map-operations">#</a>
  
</h3>
<pre><code class="language-io">map := Map with(&quot;a&quot;, 1, &quot;b&quot;, 2, &quot;c&quot;, 3)

// Get all keys and values
map keys println    // list(a, b, c)
map values println  // list(1, 2, 3)

// Size and emptiness
map size println      // 3
map isEmpty println   // false

// Removing entries
map removeAt(&quot;b&quot;)
map println  // Map_0x...: a=1, c=3

// Iteration
map foreach(key, value,
    (key .. &quot; =&gt; &quot; .. value) println
)

// Merging maps
other := Map with(&quot;c&quot;, 30, &quot;d&quot;, 4)
map merge(other)
map println  // a=1, c=30, d=4 (note c was overwritten)
</code></pre>
<h3 id="maps-as-objects">
  Maps as Objects
  
  <a class="anchor" href="#maps-as-objects">#</a>
  
</h3>
<p>Maps can act like objects with dynamic properties:</p>
<pre><code class="language-io">// Create object-like map
obj := Map clone
obj atPut(&quot;greet&quot;, method(name,
    (&quot;Hello, &quot; .. name .. &quot;!&quot;) println
))
obj atPut(&quot;x&quot;, 10)
obj atPut(&quot;y&quot;, 20)

// Use like object (sort of)
obj at(&quot;greet&quot;) call(&quot;World&quot;)  // Hello, World!
obj at(&quot;x&quot;) println  // 10
</code></pre>
<h2 id="sequences-string-handling">
  Sequences: String Handling
  
  <a class="anchor" href="#sequences-string-handling">#</a>
  
</h2>
<p>Sequences are Io&rsquo;s strings, but they&rsquo;re mutable and act like byte arrays:</p>
<pre><code class="language-io">text := &quot;Hello, World!&quot;

// Basic operations
text size println          // 13
text at(0) println        // 72 (ASCII 'H')
text at(0) asCharacter println  // H

// Slicing
text slice(0, 5) println   // Hello
text slice(7) println      // World!

// Searching
text findSeq(&quot;World&quot;) println  // 7 (index)
text containsSeq(&quot;Hello&quot;) println  // true
text beginsWithSeq(&quot;Hello&quot;) println  // true
text endsWithSeq(&quot;!&quot;) println  // true
</code></pre>
<h3 id="string-manipulation">
  String Manipulation
  
  <a class="anchor" href="#string-manipulation">#</a>
  
</h3>
<pre><code class="language-io">text := &quot;  Hello, World!  &quot;

// Trimming
text strip println         // &quot;Hello, World!&quot;
text lstrip println        // &quot;Hello, World!  &quot;
text rstrip println        // &quot;  Hello, World!&quot;

// Case conversion
&quot;hello&quot; upper println      // HELLO
&quot;WORLD&quot; lower println      // world
&quot;hello world&quot; asCapitalized println  // Hello world

// Replacement
&quot;hello world&quot; replaceSeq(&quot;world&quot;, &quot;Io&quot;) println  // hello Io
&quot;abcabc&quot; replaceFirstSeq(&quot;a&quot;, &quot;X&quot;) println  // Xbcabc

// Splitting and joining
words := &quot;apple,banana,orange&quot; split(&quot;,&quot;)
words println  // list(apple, banana, orange)

words join(&quot;-&quot;) println  // apple-banana-orange
</code></pre>
<h3 id="string-building">
  String Building
  
  <a class="anchor" href="#string-building">#</a>
  
</h3>
<pre><code class="language-io">// Inefficient string concatenation
result := &quot;&quot;
for(i, 1, 1000,
    result = result .. i .. &quot;, &quot;
)

// Better: use a list
parts := list()
for(i, 1, 1000,
    parts append(i)
)
result := parts join(&quot;, &quot;)

// Or use Sequence's mutable nature
seq := Sequence clone
for(i, 1, 100,
    seq appendSeq(i asString) appendSeq(&quot;, &quot;)
)
</code></pre>
<h3 id="regular-expressions">
  Regular Expressions
  
  <a class="anchor" href="#regular-expressions">#</a>
  
</h3>
<p>Io has built-in regex support:</p>
<pre><code class="language-io">text := &quot;The year 2024 has 365 days&quot;

// Find matches
text findRegex(&quot;\\d+&quot;) println  // MatchResult...
text allMatchesOfRegex(&quot;\\d+&quot;) foreach(match,
    match println  // 2024, 365
)

// Replace with regex
text replaceAllRegex(&quot;\\d+&quot;, &quot;N&quot;) println  // The year N has N days

// Capture groups
email := &quot;user@example.com&quot;
match := email matchesOfRegex(&quot;(\\w+)@(\\w+\\.\\w+)&quot;) 
if(match,
    match at(1) println  // user
    match at(2) println  // example.com
)
</code></pre>
<h2 id="creating-custom-collections">
  Creating Custom Collections
  
  <a class="anchor" href="#creating-custom-collections">#</a>
  
</h2>
<h3 id="stack-implementation">
  Stack Implementation
  
  <a class="anchor" href="#stack-implementation">#</a>
  
</h3>
<pre><code class="language-io">Stack := List clone
Stack push := method(item,
    self append(item)
)

Stack pop := method(
    if(size &gt; 0,
        removeAt(size - 1),
        nil
    )
)

Stack peek := method(
    if(size &gt; 0,
        at(size - 1),
        nil
    )
)

// Usage
stack := Stack clone
stack push(1) push(2) push(3)
stack pop println   // 3
stack peek println  // 2
stack pop println   // 2
stack pop println   // 1
</code></pre>
<h3 id="queue-implementation">
  Queue Implementation
  
  <a class="anchor" href="#queue-implementation">#</a>
  
</h3>
<pre><code class="language-io">Queue := Object clone
Queue init := method(
    self items := list()
    self
)

Queue enqueue := method(item,
    items append(item)
    self
)

Queue dequeue := method(
    if(items size &gt; 0,
        items removeAt(0),
        nil
    )
)

Queue isEmpty := method(items isEmpty)
Queue size := method(items size)

// Usage
queue := Queue clone init
queue enqueue(&quot;a&quot;) enqueue(&quot;b&quot;) enqueue(&quot;c&quot;)
queue dequeue println  // a
queue dequeue println  // b
queue size println     // 1
</code></pre>
<h3 id="set-implementation">
  Set Implementation
  
  <a class="anchor" href="#set-implementation">#</a>
  
</h3>
<pre><code class="language-io">Set := Object clone
Set init := method(
    self items := Map clone
    self
)

Set add := method(item,
    items atPut(item asString, item)
    self
)

Set remove := method(item,
    items removeAt(item asString)
    self
)

Set contains := method(item,
    items hasKey(item asString)
)

Set union := method(other,
    result := Set clone init
    items foreach(k, v, result add(v))
    other items foreach(k, v, result add(v))
    result
)

Set intersection := method(other,
    result := Set clone init
    items foreach(k, v,
        if(other contains(v), result add(v))
    )
    result
)

// Usage
set1 := Set clone init add(1) add(2) add(3)
set2 := Set clone init add(2) add(3) add(4)

set1 contains(2) println  // true
union := set1 union(set2)
intersection := set1 intersection(set2)
</code></pre>
<h2 id="advanced-collection-patterns">
  Advanced Collection Patterns
  
  <a class="anchor" href="#advanced-collection-patterns">#</a>
  
</h2>
<h3 id="lazy-evaluation">
  Lazy Evaluation
  
  <a class="anchor" href="#lazy-evaluation">#</a>
  
</h3>
<pre><code class="language-io">LazyList := Object clone
LazyList init := method(generator,
    self generator := generator
    self cache := list()
    self
)

LazyList at := method(index,
    while(cache size &lt;= index,
        cache append(generator call(cache size))
    )
    cache at(index)
)

LazyList take := method(n,
    result := list()
    for(i, 0, n - 1,
        result append(self at(i))
    )
    result
)

// Infinite fibonacci sequence
fibGen := LazyList clone init(block(n,
    if(n &lt; 2, n, self at(n - 1) + self at(n - 2))
))

fibGen take(10) println  // list(0, 1, 1, 2, 3, 5, 8, 13, 21, 34)
</code></pre>
<h3 id="collection-pipeline">
  Collection Pipeline
  
  <a class="anchor" href="#collection-pipeline">#</a>
  
</h3>
<pre><code class="language-io">// Method chaining for data processing
data := list(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)

result := data select(x, x % 2 == 0) \
    map(x, x * x) \
    select(x, x &gt; 10) \
    reduce(+)

result println  // 120 (16 + 36 + 64)

// Custom pipeline
List pipeline := method(
    Pipeline clone setList(self)
)

Pipeline := Object clone
Pipeline setList := method(list,
    self list := list
    self
)

Pipeline where := method(predicate,
    self list = list select(predicate)
    self
)

Pipeline transform := method(mapper,
    self list = list map(mapper)
    self
)

Pipeline aggregate := method(reducer,
    list reduce(reducer)
)

// Usage
numbers := list(1, 2, 3, 4, 5)
total := numbers pipeline \
    where(x, x % 2 == 0) \
    transform(x, x * x) \
    aggregate(+)

total println  // 20 (4 + 16)
</code></pre>
<h3 id="nested-collections">
  Nested Collections
  
  <a class="anchor" href="#nested-collections">#</a>
  
</h3>
<pre><code class="language-io">// Matrix as list of lists
matrix := list(
    list(1, 2, 3),
    list(4, 5, 6),
    list(7, 8, 9)
)

// Access element
matrix at(1) at(2) println  // 6

// Transpose
transpose := method(matrix,
    rows := matrix size
    cols := matrix at(0) size
    result := list()
    
    for(c, 0, cols - 1,
        col := list()
        for(r, 0, rows - 1,
            col append(matrix at(r) at(c))
        )
        result append(col)
    )
    result
)

transpose(matrix) println
// list(list(1, 4, 7), list(2, 5, 8), list(3, 6, 9))
</code></pre>
<h2 id="performance-considerations">
  Performance Considerations
  
  <a class="anchor" href="#performance-considerations">#</a>
  
</h2>
<pre><code class="language-io">// List operations performance
list := List clone

// O(1) operations
list append(item)      // Constant time
list at(index)         // Constant time
list size              // Constant time

// O(n) operations
list indexOf(item)     // Linear search
list contains(item)    // Linear search
list remove(item)      // Linear search + shift

// Map operations are generally O(1)
map := Map clone
map atPut(key, value)  // Constant average
map at(key)            // Constant average
map removeAt(key)      // Constant average

// Choose the right collection for your needs
</code></pre>
<h2 id="collection-serialization">
  Collection Serialization
  
  <a class="anchor" href="#collection-serialization">#</a>
  
</h2>
<pre><code class="language-io">// JSON serialization
list := list(1, 2, 3, Map with(&quot;name&quot;, &quot;Alice&quot;))
json := list asJson
json println  // [1,2,3,{&quot;name&quot;:&quot;Alice&quot;}]

// Deserialize
restored := json parseJson
restored println

// Custom serialization
Collection := Object clone
Collection serialize := method(
    result := list()
    self foreach(item,
        if(item hasSlot(&quot;serialize&quot;),
            result append(item serialize),
            result append(item asString)
        )
    )
    result join(&quot;|&quot;)
)
</code></pre>
<h2 id="common-pitfalls">
  Common Pitfalls
  
  <a class="anchor" href="#common-pitfalls">#</a>
  
</h2>
<h3 id="shared-references">
  Shared References
  
  <a class="anchor" href="#shared-references">#</a>
  
</h3>
<pre><code class="language-io">// PROBLEM: Shared reference
original := list(1, 2, 3)
copy := original  // Not a copy!
copy append(4)
original println  // list(1, 2, 3, 4) - modified!

// SOLUTION: Use copy
original := list(1, 2, 3)
copy := original copy
copy append(4)
original println  // list(1, 2, 3) - unchanged
</code></pre>
<h3 id="iterator-invalidation">
  Iterator Invalidation
  
  <a class="anchor" href="#iterator-invalidation">#</a>
  
</h3>
<pre><code class="language-io">// PROBLEM: Modifying while iterating
list := list(1, 2, 3, 4, 5)
list foreach(item,
    if(item % 2 == 0,
        list remove(item)  // Dangerous!
    )
)

// SOLUTION: Use select/reject or iterate on copy
list := list(1, 2, 3, 4, 5)
list = list reject(item, item % 2 == 0)
</code></pre>
<h2 id="exercises">
  Exercises
  
  <a class="anchor" href="#exercises">#</a>
  
</h2>
<ol>
<li>
<p><strong>Circular Buffer</strong>: Implement a fixed-size circular buffer that overwrites old elements.</p>
</li>
<li>
<p><strong>MultiMap</strong>: Create a map that can store multiple values per key.</p>
</li>
<li>
<p><strong>Sorted List</strong>: Implement a list that maintains sorted order on insertion.</p>
</li>
<li>
<p><strong>Tree Structure</strong>: Build a tree collection with parent-child relationships.</p>
</li>
<li>
<p><strong>Graph</strong>: Implement a graph data structure with nodes and edges.</p>
</li>
</ol>
<h2 id="real-world-example-todo-list-with-tags">
  Real-World Example: Todo List with Tags
  
  <a class="anchor" href="#real-world-example-todo-list-with-tags">#</a>
  
</h2>
<pre><code class="language-io">TodoItem := Object clone
TodoItem init := method(description,
    self description := description
    self tags := Set clone init
    self completed := false
    self
)

TodoList := Object clone
TodoList init := method(
    self items := list()
    self
)

TodoList add := method(description,
    item := TodoItem clone init(description)
    items append(item)
    item
)

TodoList taggedWith := method(tag,
    items select(item, item tags contains(tag))
)

TodoList pending := method(
    items select(item, item completed not)
)

TodoList complete := method(description,
    item := items detect(i, i description == description)
    if(item, item completed = true)
    self
)

// Usage
todos := TodoList clone init

todos add(&quot;Write documentation&quot;) tags add(&quot;work&quot;) add(&quot;writing&quot;)
todos add(&quot;Fix bugs&quot;) tags add(&quot;work&quot;) add(&quot;urgent&quot;)
todos add(&quot;Buy groceries&quot;) tags add(&quot;personal&quot;)

todos taggedWith(&quot;urgent&quot;) foreach(item,
    item description println
)
// Fix bugs

todos complete(&quot;Buy groceries&quot;)
todos pending foreach(item,
    item description println
)
// Write documentation
// Fix bugs
</code></pre>
<h2 id="conclusion">
  Conclusion
  
  <a class="anchor" href="#conclusion">#</a>
  
</h2>
<p>Io&rsquo;s collections—List, Map, and Sequence—provide a solid foundation for data manipulation. They&rsquo;re all objects, following Io&rsquo;s uniform object model, and support functional programming patterns like map, select, and reduce.</p>
<p>The real power comes from Io&rsquo;s flexibility: you can add methods to existing collection types, create custom collections that integrate seamlessly, and build sophisticated data structures using simple object composition. Understanding collections deeply is essential for effective Io programming, as they form the backbone of most data processing tasks.</p>
<hr>
<p><em>Next: <a href="09-blocks-and-closures.md">Chapter 9 - Blocks and Closures</a></em></p>

  
  <footer class="book-footer">
    
  </footer>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
      <a href="/docs/07-control-flow/" class="flex align-center book-icon">
        <img src="/svg/backward.svg" class="book-icon" alt="Previous" title="Control Flow" />
        <span>Control Flow</span>
      </a>
    
    </span>
    <span>
    
      <a href="/docs/09-blocks-and-closures/" class="flex align-center book-icon">
        <span>Blocks and Closures</span>
        <img src="/svg/forward.svg" class="book-icon" alt="Next" title="Blocks and Closures" />
      </a>
    
    </span>
  </div>
  




  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 
      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

 
  </main>

  
</body>
</html>















