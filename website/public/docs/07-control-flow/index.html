<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Chapter 7: Control Flow
  
  #
  

In most programming languages, control flow structures like if, while, and for are built-in syntax with special rules. In Io, they&rsquo;re just methods that receive messages. This chapter explores how Io&rsquo;s message-passing philosophy extends to control flow, and how you can create your own control structures.

  Everything Is a Message
  
  #
  

Let&rsquo;s start with a simple comparison. In C or Java:
if (x &gt; 5) {
    printf(&quot;Big\n&quot;);
} else {
    printf(&quot;Small\n&quot;);
}

This is special syntax that the compiler understands. But in Io:">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/07-control-flow/">
  <meta property="og:site_name" content="The Io Programming Language">
  <meta property="og:title" content="Control Flow">
  <meta property="og:description" content="Chapter 7: Control Flow # In most programming languages, control flow structures like if, while, and for are built-in syntax with special rules. In Io, they’re just methods that receive messages. This chapter explores how Io’s message-passing philosophy extends to control flow, and how you can create your own control structures.
Everything Is a Message # Let’s start with a simple comparison. In C or Java:
if (x &gt; 5) { printf(&#34;Big\n&#34;); } else { printf(&#34;Small\n&#34;); } This is special syntax that the compiler understands. But in Io:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>Control Flow | The Io Programming Language</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/07-control-flow/">
<link rel="stylesheet" href="/book.min.4cb515616f615b2a0bff9bc1586e8704536e3d9ada38b7ed57973b3f954b35de.css" integrity="sha256-TLUVYW9hWyoL/5vBWG6HBFNuPZraOLftV5c7P5VLNd4=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.20734475dc55187083547d768bab4ab01cefdbd4f93d7659611364d02969e74c.js" integrity="sha256-IHNEddxVGHCDVH12i6tKsBzv29T5PXZZYRNk0Clp50w=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <link rel="stylesheet" href="/custom.css">
</head>
<body dir="ltr" class="book-kind-page book-type-docs book-layout-">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  
  
  <header class="top-header">
    <div class="header-container">
      <div class="header-brand">
        <a href="/" class="header-title">The Io Programming Language</a>
      </div>
      <div class="header-search">
        
<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>


      </div>
    </div>
  </header>
  
  <main class="container flex with-header">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>













  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/00-preface/" class="">Why Io?</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/01-introduction/" class="">Introduction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/02-getting-started/" class="">Getting Started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/03-everything-is-an-object/" class="">Everything is an Object</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/04-prototypes-not-classes/" class="">Prototypes, Not Classes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/05-messages-and-slots/" class="">Messages and Slots</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/06-cloning-and-inheritance/" class="">Cloning and Inheritance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/07-control-flow/" class="active">Control Flow</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/08-collections/" class="">Collections</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/09-blocks-and-closures/" class="">Blocks and Closures</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/10-exceptions/" class="">Exceptions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/11-metaprogramming/" class="">Metaprogramming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/12-concurrency/" class="">Concurrency</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/13-domain-specific-languages/" class="">Domain-Specific Languages</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/14-c-integration/" class="">C Integration</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/15-real-world-patterns/" class="">Real-World Patterns</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/16-case-studies/" class="">Case Studies</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/17-ecosystem-and-libraries/" class="">Ecosystem and Libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/18-conclusion/" class="">Conclusion</a>
  

        </li>
      
    
  </ul>










  
<ul>
  
  <li>
    
    <a href="https://github.com/IoLanguage/io"  target="_blank" rel="noopener">
        GitHub
      </a>
  </li>
  
  <li>
    
    <a href="https://iolanguage.org"  target="_blank" rel="noopener">
        Io Language
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Control Flow</h3>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
<article class="markdown book-article">
  
  
  
  
  
  
  
    
  
  
  <div class="chapter-header">
    <h1 class="chapter-title">Control Flow</h1>
    
    <div class="chapter-number">Chapter 7</div>
    
  </div>
  
  
  
  
  
<p>In most programming languages, control flow structures like <code>if</code>, <code>while</code>, and <code>for</code> are built-in syntax with special rules. In Io, they&rsquo;re just methods that receive messages. This chapter explores how Io&rsquo;s message-passing philosophy extends to control flow, and how you can create your own control structures.</p>
<h2 id="everything-is-a-message">
  Everything Is a Message
  
  <a class="anchor" href="#everything-is-a-message">#</a>
  
</h2>
<p>Let&rsquo;s start with a simple comparison. In C or Java:</p>
<pre><code class="language-c">if (x &gt; 5) {
    printf(&quot;Big\n&quot;);
} else {
    printf(&quot;Small\n&quot;);
}
</code></pre>
<p>This is special syntax that the compiler understands. But in Io:</p>
<pre><code class="language-io">if(x &gt; 5,
    &quot;Big&quot; println,
    &quot;Small&quot; println
)
</code></pre>
<p>The <code>if</code> is just a method call! You can even see its implementation:</p>
<pre><code class="language-io">if println
// method(...)

// You could redefine it (don't actually do this!)
Object if := method(condition, trueBlock, falseBlock,
    &quot;Making a decision!&quot; println
    resend  // Call original if
)
</code></pre>
<h2 id="the-if-method">
  The if Method
  
  <a class="anchor" href="#the-if-method">#</a>
  
</h2>
<p>The <code>if</code> method takes two or three arguments:</p>
<pre><code class="language-io">// Two arguments: if-then
if(temperature &gt; 30,
    &quot;It's hot!&quot; println
)

// Three arguments: if-then-else
if(temperature &gt; 30,
    &quot;It's hot!&quot; println,
    &quot;It's nice!&quot; println
)

// if returns the value of the executed block
result := if(5 &gt; 3, &quot;yes&quot;, &quot;no&quot;)
result println  // &quot;yes&quot;

// Nested if
category := if(score &gt; 90, &quot;A&quot;,
    if(score &gt; 80, &quot;B&quot;,
        if(score &gt; 70, &quot;C&quot;, &quot;F&quot;)
    )
)
</code></pre>
<h2 id="understanding-blocks">
  Understanding Blocks
  
  <a class="anchor" href="#understanding-blocks">#</a>
  
</h2>
<p>The key to Io&rsquo;s control flow is that code blocks are objects that aren&rsquo;t evaluated immediately:</p>
<pre><code class="language-io">// This prints immediately
&quot;Hello&quot; println

// This creates a block object but doesn't execute it
block := method(&quot;Hello&quot; println)

// Execute it later
block call  // Now it prints &quot;Hello&quot;

// Blocks in if
if(true,
    &quot;This is a block&quot; println  // Not executed until if decides to
)
</code></pre>
<p>This lazy evaluation is crucial. If both branches of an <code>if</code> were evaluated immediately, both would execute!</p>
<pre><code class="language-io">// In a hypothetical eager language:
eagerIf := method(condition, trueValue, falseValue,
    if(condition, trueValue, falseValue)
)

x := 5
eagerIf(x &gt; 3,
    &quot;Greater&quot; println,  // This executes immediately
    &quot;Lesser&quot; println    // This also executes immediately!
)
// Would print both!

// But Io's if receives unevaluated blocks
if(x &gt; 3,
    &quot;Greater&quot; println,  // Only this executes
    &quot;Lesser&quot; println    // This never executes
)
</code></pre>
<h2 id="the-while-loop">
  The while Loop
  
  <a class="anchor" href="#the-while-loop">#</a>
  
</h2>
<p>The <code>while</code> method repeatedly evaluates its condition and body:</p>
<pre><code class="language-io">i := 0
while(i &lt; 5,
    i println
    i = i + 1
)
// Prints 0, 1, 2, 3, 4

// while returns nil by default
result := while(false, &quot;Never runs&quot;)
result println  // nil

// Infinite loops
while(true,
    input := File standardInput readLine
    if(input == &quot;quit&quot;, break)
    (&quot;You said: &quot; .. input) println
)
</code></pre>
<h2 id="the-for-loop">
  The for Loop
  
  <a class="anchor" href="#the-for-loop">#</a>
  
</h2>
<p>The <code>for</code> method provides a counting loop:</p>
<pre><code class="language-io">// Basic for loop
for(i, 1, 5,
    i println
)
// Prints 1, 2, 3, 4, 5

// With step
for(i, 0, 10, 2,
    i println
)
// Prints 0, 2, 4, 6, 8, 10

// Backward
for(i, 5, 1,
    i println
)
// Prints 5, 4, 3, 2, 1

// for can return values
sum := 0
for(i, 1, 100,
    sum = sum + i
)
sum println  // 5050
</code></pre>
<h2 id="the-loop-method">
  The loop Method
  
  <a class="anchor" href="#the-loop-method">#</a>
  
</h2>
<p>Io provides a <code>loop</code> method for infinite loops:</p>
<pre><code class="language-io">count := 0
loop(
    count = count + 1
    if(count &gt; 10, break)
    count println
)

// Equivalent to while(true, ...)
</code></pre>
<h2 id="break-and-continue">
  break and continue
  
  <a class="anchor" href="#break-and-continue">#</a>
  
</h2>
<p>These work like in other languages, but they&rsquo;re methods too:</p>
<pre><code class="language-io">// break exits the loop
for(i, 1, 10,
    if(i == 5, break)
    i println
)
// Prints 1, 2, 3, 4

// continue skips to next iteration
for(i, 1, 10,
    if(i % 2 == 0, continue)
    i println
)
// Prints 1, 3, 5, 7, 9

// break can return a value
result := for(i, 1, 100,
    if(i * i &gt; 50, break(i))
)
result println  // 8 (first i where i*i &gt; 50)
</code></pre>
<h2 id="the-repeat-method">
  The repeat Method
  
  <a class="anchor" href="#the-repeat-method">#</a>
  
</h2>
<p>A simpler counting mechanism:</p>
<pre><code class="language-io">5 repeat(&quot;Hello&quot; println)
// Prints &quot;Hello&quot; 5 times

// repeat with index
5 repeat(i, 
    (&quot;Count: &quot; .. i) println
)
// Count: 0
// Count: 1
// Count: 2
// Count: 3
// Count: 4
</code></pre>
<h2 id="creating-custom-control-structures">
  Creating Custom Control Structures
  
  <a class="anchor" href="#creating-custom-control-structures">#</a>
  
</h2>
<p>Since control structures are just methods, you can create your own:</p>
<pre><code class="language-io">// unless: opposite of if
Object unless := method(condition, falseBlock,
    if(condition not, falseBlock call)
)

unless(5 &gt; 10,
    &quot;5 is not greater than 10&quot; println
)

// until: opposite of while
Object until := method(condition, body,
    while(condition not, body)
)

x := 0
until(x &gt; 5,
    x println
    x = x + 1
)

// times: repeat n times with cleaner syntax
Number times := method(body,
    for(i, 1, self, body)
)

3 times(&quot;Hello&quot; println)
</code></pre>
<h2 id="the-elseif-pattern">
  The elseif Pattern
  
  <a class="anchor" href="#the-elseif-pattern">#</a>
  
</h2>
<p>Io uses <code>elseif</code> for chained conditionals:</p>
<pre><code class="language-io">score := 85

if(score &gt;= 90) then(
    &quot;A&quot; println
) elseif(score &gt;= 80) then(
    &quot;B&quot; println
) elseif(score &gt;= 70) then(
    &quot;C&quot; println
) else(
    &quot;F&quot; println
)
// Prints &quot;B&quot;

// This is actually a chain of methods
// if returns a special object when false
// that object has elseif and else methods
</code></pre>
<h2 id="switch-like-behavior">
  Switch-like Behavior
  
  <a class="anchor" href="#switch-like-behavior">#</a>
  
</h2>
<p>Io doesn&rsquo;t have a switch statement, but you can build one:</p>
<pre><code class="language-io">Object switch := method(value,
    self switchValue := value
    self
)

Object case := method(testValue, action,
    if(switchValue == testValue,
        action call
        self switchMatched := true
    )
    self
)

Object default := method(action,
    if(hasSlot(&quot;switchMatched&quot;) not,
        action call
    )
    self
)

// Usage
day := &quot;Tuesday&quot;

switch(day) case(&quot;Monday&quot;, 
    &quot;Start of the week&quot; println
) case(&quot;Tuesday&quot;,
    &quot;Second day&quot; println
) case(&quot;Friday&quot;,
    &quot;TGIF!&quot; println
) default(
    &quot;Regular day&quot; println
)
// Prints &quot;Second day&quot;
</code></pre>
<h2 id="pattern-matching">
  Pattern Matching
  
  <a class="anchor" href="#pattern-matching">#</a>
  
</h2>
<p>Build more sophisticated matching:</p>
<pre><code class="language-io">Object match := method(
    self matchValue := call evalArgAt(0)
    self matchContext := call sender
    self
)

Object when := method(pattern, action,
    if(hasSlot(&quot;matchFound&quot;) not,
        matched := false
        
        // Check different pattern types
        if(pattern type == &quot;Block&quot;,
            matched = pattern call(matchValue),
            matched = (pattern == matchValue)
        )
        
        if(matched,
            self matchResult := action call(matchValue)
            self matchFound := true
        )
    )
    self
)

Object otherwise := method(action,
    if(hasSlot(&quot;matchFound&quot;) not,
        self matchResult := action call(matchValue)
    )
    matchResult
)

// Usage
result := match(x) when(
    block(v, v &lt; 0), 
    method(v, &quot;negative&quot;)
) when(
    0,
    method(v, &quot;zero&quot;)
) when(
    block(v, v &gt; 0),
    method(v, &quot;positive&quot;)
) otherwise(
    method(v, &quot;unknown&quot;)
)
</code></pre>
<h2 id="iterating-over-collections">
  Iterating Over Collections
  
  <a class="anchor" href="#iterating-over-collections">#</a>
  
</h2>
<p>Collections have their own iteration methods:</p>
<pre><code class="language-io">// List iteration
list(1, 2, 3) foreach(item,
    item println
)

// With index
list(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) foreach(i, item,
    (i .. &quot;: &quot; .. item) println
)
// 0: a
// 1: b
// 2: c

// Map iteration
map := Map clone
map atPut(&quot;name&quot;, &quot;Alice&quot;)
map atPut(&quot;age&quot;, 30)

map foreach(key, value,
    (key .. &quot; = &quot; .. value) println
)
// name = Alice
// age = 30
</code></pre>
<h2 id="functional-control-flow">
  Functional Control Flow
  
  <a class="anchor" href="#functional-control-flow">#</a>
  
</h2>
<p>Io supports functional programming patterns:</p>
<pre><code class="language-io">// map: transform each element
squares := list(1, 2, 3, 4) map(x, x * x)
squares println  // list(1, 4, 9, 16)

// select: filter elements
evens := list(1, 2, 3, 4, 5, 6) select(x, x % 2 == 0)
evens println  // list(2, 4, 6)

// detect: find first matching element
first_big := list(1, 3, 5, 7, 9) detect(x, x &gt; 5)
first_big println  // 7

// reduce: aggregate elements
sum := list(1, 2, 3, 4, 5) reduce(+)
sum println  // 15

product := list(1, 2, 3, 4) reduce(a, b, a * b)
product println  // 24
</code></pre>
<h2 id="lazy-evaluation-control">
  Lazy Evaluation Control
  
  <a class="anchor" href="#lazy-evaluation-control">#</a>
  
</h2>
<p>Create control structures with lazy evaluation:</p>
<pre><code class="language-io">Object lazyIf := method(
    condition := call argAt(0)
    trueBlock := call argAt(1)
    falseBlock := call argAt(2)
    
    if(condition doInContext(call sender),
        trueBlock doInContext(call sender),
        if(falseBlock,
            falseBlock doInContext(call sender)
        )
    )
)

// Both condition and blocks are lazy
x := 5
lazyIf(x &gt; 3 and computeExpensive(),
    &quot;True branch&quot; println,
    &quot;False branch&quot; println
)
</code></pre>
<h2 id="exception-handling-as-control-flow">
  Exception Handling as Control Flow
  
  <a class="anchor" href="#exception-handling-as-control-flow">#</a>
  
</h2>
<p>Io&rsquo;s <code>try</code> is also a control flow method:</p>
<pre><code class="language-io">try(
    // Code that might fail
    riskyOperation()
) catch(Exception,
    &quot;An error occurred&quot; println
)

// try-catch-finally pattern
result := try(
    file := File with(&quot;data.txt&quot;) openForReading
    file contents
) catch(Exception, e,
    (&quot;Error: &quot; .. e message) println
    nil
) finally(
    if(file, file close)
)
</code></pre>
<h2 id="performance-considerations">
  Performance Considerations
  
  <a class="anchor" href="#performance-considerations">#</a>
  
</h2>
<p>Since control structures are methods, they have overhead:</p>
<pre><code class="language-io">// Method-based loop (slower)
i := 0
while(i &lt; 1000000,
    i = i + 1
)

// But you can't really avoid it in Io
// The language is optimized for expressiveness over speed
</code></pre>
<h2 id="advanced-coroutine-based-control">
  Advanced: Coroutine-based Control
  
  <a class="anchor" href="#advanced-coroutine-based-control">#</a>
  
</h2>
<p>Io&rsquo;s coroutines enable advanced control flow:</p>
<pre><code class="language-io">// Generator pattern
Generator := Object clone
Generator init := method(
    self coro := Coroutine currentCoroutine
    self
)

Generator yield := method(value,
    coro pause(value)
)

Generator fibonacci := method(
    a := 0
    b := 1
    loop(
        yield(a)
        temp := a + b
        a = b
        b = temp
    )
)

// Usage
gen := Generator clone
fib := gen @fibonacci  // @ runs in new coroutine

10 repeat(
    fib resume println
)
// 0, 1, 1, 2, 3, 5, 8, 13, 21, 34
</code></pre>
<h2 id="common-patterns">
  Common Patterns
  
  <a class="anchor" href="#common-patterns">#</a>
  
</h2>
<h3 id="early-return-pattern">
  Early Return Pattern
  
  <a class="anchor" href="#early-return-pattern">#</a>
  
</h3>
<pre><code class="language-io">Object findFirst := method(list, condition,
    list foreach(item,
        if(condition call(item),
            return item
        )
    )
    nil
)

result := findFirst(list(1, 2, 3, 4, 5), 
    block(x, x &gt; 3)
)
result println  // 4
</code></pre>
<h3 id="guard-clause-pattern">
  Guard Clause Pattern
  
  <a class="anchor" href="#guard-clause-pattern">#</a>
  
</h3>
<pre><code class="language-io">processData := method(data,
    if(data isNil, return &quot;No data&quot;)
    if(data size == 0, return &quot;Empty data&quot;)
    if(data size &gt; 1000, return &quot;Too much data&quot;)
    
    // Process data
    &quot;Processed&quot; return
)
</code></pre>
<h3 id="loop-with-state">
  Loop with State
  
  <a class="anchor" href="#loop-with-state">#</a>
  
</h3>
<pre><code class="language-io">Object loopWithState := method(initial, condition, update, body,
    state := initial
    while(condition call(state),
        body call(state)
        state = update call(state)
    )
    state
)

// Sum squares until sum &gt; 100
result := loopWithState(
    list(0, 1),  // [sum, n]
    block(state, state at(0) &lt;= 100),
    block(state, list(state at(0) + state at(1) squared, state at(1) + 1)),
    block(state, (&quot;n=&quot; .. state at(1) .. &quot; sum=&quot; .. state at(0)) println)
)
</code></pre>
<h2 id="debugging-control-flow">
  Debugging Control Flow
  
  <a class="anchor" href="#debugging-control-flow">#</a>
  
</h2>
<pre><code class="language-io">Object trace := method(label,
    (label .. &quot; - evaluating&quot;) println
    self
)

Object debugIf := method(condition, trueBlock, falseBlock,
    &quot;Evaluating condition...&quot; println
    result := condition
    (&quot;Condition is: &quot; .. result) println
    
    if(result,
        &quot;Taking true branch&quot; println
        trueBlock,
        &quot;Taking false branch&quot; println
        falseBlock
    )
)

x := 5
debugIf(x trace(&quot;x&quot;) &gt; trace(&quot;3&quot;) 3,
    &quot;Greater&quot; println,
    &quot;Lesser&quot; println
)
</code></pre>
<h2 id="exercises">
  Exercises
  
  <a class="anchor" href="#exercises">#</a>
  
</h2>
<ol>
<li>
<p><strong>do-while Loop</strong>: Implement a <code>doWhile</code> method that executes the body at least once.</p>
</li>
<li>
<p><strong>for-each with Break</strong>: Create a <code>forEachBreakable</code> that allows breaking with a return value.</p>
</li>
<li>
<p><strong>Retry Logic</strong>: Build a <code>retry</code> control structure that retries an operation n times on failure.</p>
</li>
<li>
<p><strong>Parallel If</strong>: Create a <code>parallelIf</code> that evaluates both branches concurrently and returns the first to complete.</p>
</li>
<li>
<p><strong>State Machine</strong>: Implement a state machine DSL using custom control structures.</p>
</li>
</ol>
<h2 id="real-world-example-retry-with-backoff">
  Real-World Example: Retry with Backoff
  
  <a class="anchor" href="#real-world-example-retry-with-backoff">#</a>
  
</h2>
<pre><code class="language-io">Object retryWithBackoff := method(maxAttempts, baseDelay, operation,
    attempt := 1
    lastError := nil
    
    while(attempt &lt;= maxAttempts,
        try(
            return operation call(attempt)
        ) catch(Exception, e,
            lastError = e
            if(attempt &lt; maxAttempts,
                delay := baseDelay * (2 pow(attempt - 1))
                (&quot;Attempt &quot; .. attempt .. &quot; failed, waiting &quot; .. delay .. &quot;ms&quot;) println
                System sleep(delay / 1000)
            )
        )
        attempt = attempt + 1
    )
    
    Exception raise(&quot;Failed after &quot; .. maxAttempts .. &quot; attempts: &quot; .. lastError message)
)

// Usage
result := retryWithBackoff(3, 100,
    block(attempt,
        (&quot;Trying attempt &quot; .. attempt) println
        if(Random value &lt; 0.7,
            Exception raise(&quot;Random failure&quot;),
            &quot;Success!&quot;
        )
    )
)
</code></pre>
<h2 id="conclusion">
  Conclusion
  
  <a class="anchor" href="#conclusion">#</a>
  
</h2>
<p>Io&rsquo;s approach to control flow—implementing everything as methods rather than special syntax—is both radical and elegant. It demonstrates the power of Io&rsquo;s uniform message-passing model: when everything is a message, even fundamental programming constructs become malleable and extensible.</p>
<p>This flexibility allows you to:</p>
<ul>
<li>Create domain-specific control structures</li>
<li>Implement new programming paradigms</li>
<li>Debug and trace control flow</li>
<li>Understand exactly how your program executes</li>
</ul>
<p>The cost is performance and perhaps initial unfamiliarity. But the benefit is a deep understanding of control flow and the ability to shape the language to your needs rather than being constrained by built-in constructs.</p>
<hr>

  
  <footer class="book-footer">
    
  </footer>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
      <a href="/docs/06-cloning-and-inheritance/" class="flex align-center book-icon">
        <img src="/svg/backward.svg" class="book-icon" alt="Previous" title="Cloning and Inheritance" />
        <span>Cloning and Inheritance</span>
      </a>
    
    </span>
    <span>
    
      <a href="/docs/08-collections/" class="flex align-center book-icon">
        <span>Collections</span>
        <img src="/svg/forward.svg" class="book-icon" alt="Next" title="Collections" />
      </a>
    
    </span>
  </div>
  




  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 
      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    

 
  </main>

  
</body>
</html>















